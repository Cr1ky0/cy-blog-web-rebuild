{"version":3,"file":"static/js/8720.cd5e70d2.chunk.js","mappings":"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","sources":["webpack://front-end/./src/components/Universal/MobileTopBtn/index.module.scss?de3f","components/Universal/MobileTopBtn/index.tsx","webpack://front-end/./src/components/BlogPage/BlogToc2/index.module.scss?4cf1","components/BlogPage/BlogToc2/index.tsx","webpack://front-end/./src/pages/MainPage/BlogPage/index.module.scss?8859","pages/MainPage/BlogPage/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"dark\":\"MobileTopBtn_dark__UC7SS\",\"dark-2\":\"MobileTopBtn_dark-2__9p+wg\",\"dark-3\":\"MobileTopBtn_dark-3__sIFLw\",\"dark-3-onforce\":\"MobileTopBtn_dark-3-onforce__YsanF\",\"light\":\"MobileTopBtn_light__zSl6B\",\"light-1\":\"MobileTopBtn_light-1__Pojtv\",\"dark-font\":\"MobileTopBtn_dark-font__1sfpL\",\"dark-back-2-onforce-no-trans\":\"MobileTopBtn_dark-back-2-onforce-no-trans__mJdOS\",\"hoverDark\":\"MobileTopBtn_hoverDark__K3-I2\",\"hoverLight\":\"MobileTopBtn_hoverLight__-vknj\",\"light-font\":\"MobileTopBtn_light-font__y3sE-\",\"mark\":\"MobileTopBtn_mark__+HtR-\",\"transBase\":\"MobileTopBtn_transBase__ixHWJ\",\"transHide\":\"MobileTopBtn_transHide__MaYf6\",\"showAnime\":\"MobileTopBtn_showAnime__X+dE4\",\"hideAnime\":\"MobileTopBtn_hideAnime__KrRd6\",\"show-anime-delay-1s\":\"MobileTopBtn_show-anime-delay-1s__fOK0i\",\"show-anime-no-delay\":\"MobileTopBtn_show-anime-no-delay__2TcI2\",\"mobileMenuDark\":\"MobileTopBtn_mobileMenuDark__jAGrt\",\"mobileMenuLight\":\"MobileTopBtn_mobileMenuLight__S3I9h\",\"content\":\"MobileTopBtn_content__LkhDZ\",\"mobileMenu\":\"MobileTopBtn_mobileMenu__LEtZQ\",\"contentActive\":\"MobileTopBtn_contentActive__Is-D2\",\"contentHide\":\"MobileTopBtn_contentHide__nKer6\"};","import React, { CSSProperties } from 'react';\n\n// css\nimport style from './index.module.scss';\n\n// redux\nimport { useAppDispatch, useAppSelector } from '@/redux';\nimport { setMobileMenuOpen } from '@/redux/slices/universal';\n\ninterface MobileTopBtnProps {\n  styles?: CSSProperties;\n  children: React.ReactNode;\n}\n\nconst MobileTopBtn: React.FC<MobileTopBtnProps> = ({ children, styles }) => {\n  const dispatch = useAppDispatch();\n  const themeMode = useAppSelector(state => state.universal.themeMode);\n  const open = useAppSelector(state => state.universal.moblieMenuOpen);\n\n  return (\n    <>\n      <div className={`${style.content} ${open ? style.contentActive : ''}`} style={styles}>\n        {children}\n      </div>\n      <div\n        className={`${style.mobileMenu} ${themeMode === 'dark' ? style.mobileMenuDark : style.mobileMenuLight}`}\n        onClick={() => {\n          dispatch(setMobileMenuOpen(!open));\n        }}\n      >\n        <div className=\"iconfont\">&#xe7f4;</div>\n      </div>\n    </>\n  );\n};\n\nexport default MobileTopBtn;\n","// extracted by mini-css-extract-plugin\nexport default {\"dark\":\"BlogToc2_dark__C4+2n\",\"dark-2\":\"BlogToc2_dark-2__-RunS\",\"dark-3\":\"BlogToc2_dark-3__2FXMD\",\"dark-3-onforce\":\"BlogToc2_dark-3-onforce__-UV+k\",\"light\":\"BlogToc2_light__iwg-B\",\"light-1\":\"BlogToc2_light-1__qY1SU\",\"dark-font\":\"BlogToc2_dark-font__b6NeB\",\"dark-back-2-onforce-no-trans\":\"BlogToc2_dark-back-2-onforce-no-trans__Mn1sr\",\"hoverDark\":\"BlogToc2_hoverDark__P0lJS\",\"hoverLight\":\"BlogToc2_hoverLight__GNM3O\",\"light-font\":\"BlogToc2_light-font__bBHky\",\"mark\":\"BlogToc2_mark__tCh7f\",\"transBase\":\"BlogToc2_transBase__69XwT\",\"transHide\":\"BlogToc2_transHide__WnW5U\",\"showAnime\":\"BlogToc2_showAnime__JskRn\",\"hideAnime\":\"BlogToc2_hideAnime__wU9-y\",\"show-anime-delay-1s\":\"BlogToc2_show-anime-delay-1s__PbEAu\",\"show-anime-no-delay\":\"BlogToc2_show-anime-no-delay__LtSMd\",\"tocHeader\":\"BlogToc2_tocHeader__2NQ4D\"};","import React, { useMemo } from 'react';\n\n// antd\nimport { Anchor } from 'antd';\n\n// css\nimport style from './index.module.scss';\n\n// redux\nimport { useAppSelector } from '@/redux';\n\ninterface BlogTocProps {\n  text: string;\n}\n\nconst getTitleList = (text: string) => {\n  // 移除被```或者~~~包围的代码块内容\n  const removedCodeblocks = text.replace(/(```|~~~)[\\s\\S]*?\\1/g, '');\n\n  // 提取包含1~n个#号的标题内容\n  const headings = removedCodeblocks.match(/(^|\\n)(#{1,}[^#\\n].*)/g);\n  // 移除标题前的换行符\n  const titles = headings ? headings.map(line => line.trim()) : [];\n\n  const filterList = titles\n    ? titles.map(title => {\n        return title.replace(/^#+/g, '').trim();\n      })\n    : [];\n  return filterList.map(title => {\n    return title.split('<')[0].trim();\n  });\n};\n\nconst generateAnchorItems = (textList: string[]) => {\n  return textList.map((text, index) => {\n    return { key: index, href: '#' + text, title: text };\n  });\n};\nconst BlogToc: React.FC<BlogTocProps> = ({ text }) => {\n  const fadeOut = useAppSelector(state => state.progressbar.fadeOut);\n  const tocList = useMemo(() => (text ? generateAnchorItems(getTitleList(text)) : []), [text]);\n\n  return (\n    <div className={`${style.wrapper} clearfix  transBase ${fadeOut ? 'transHide' : ''}`}>\n      <div className={style.tocHeader}>\n        <span>此页内容 </span>\n        <span className=\"iconfont\">&#xe640;</span>\n      </div>\n      {tocList && tocList.length ? (\n        <Anchor\n          offsetTop={70}\n          items={tocList}\n          onClick={(e, link) => {\n            e.preventDefault();\n            const span = document.getElementById(String(link.title)) as HTMLSpanElement;\n            window.scrollTo({\n              top: span.offsetTop,\n              behavior: 'smooth',\n            });\n          }}\n        ></Anchor>\n      ) : (\n        <div>No Content</div>\n      )}\n    </div>\n  );\n};\n\nexport default BlogToc;\n","// extracted by mini-css-extract-plugin\nexport default {\"dark\":\"BlogPage_dark__2cOei\",\"dark-2\":\"BlogPage_dark-2__bsWHa\",\"dark-3\":\"BlogPage_dark-3__4BcMW\",\"dark-3-onforce\":\"BlogPage_dark-3-onforce__eiXtz\",\"light\":\"BlogPage_light__Bk2dZ\",\"light-1\":\"BlogPage_light-1__BcK0b\",\"dark-font\":\"BlogPage_dark-font__aJvKk\",\"dark-back-2-onforce-no-trans\":\"BlogPage_dark-back-2-onforce-no-trans__xBZOg\",\"hoverDark\":\"BlogPage_hoverDark__2R7CP\",\"hoverLight\":\"BlogPage_hoverLight__X7Y7Q\",\"light-font\":\"BlogPage_light-font__mSMny\",\"mark\":\"BlogPage_mark__Jgyi0\",\"transBase\":\"BlogPage_transBase__Lg9Yo\",\"transHide\":\"BlogPage_transHide__Bn7Cx\",\"showAnime\":\"BlogPage_showAnime__yHS80\",\"hideAnime\":\"BlogPage_hideAnime__phINQ\",\"show-anime-delay-1s\":\"BlogPage_show-anime-delay-1s__D-o4o\",\"show-anime-no-delay\":\"BlogPage_show-anime-no-delay__X2SFV\",\"wrapper\":\"BlogPage_wrapper__-Aevl\",\"sider\":\"BlogPage_sider__44VR1\",\"content\":\"BlogPage_content__ZvF2R\",\"loadingAnime\":\"BlogPage_loadingAnime__PnH+1\",\"toc\":\"BlogPage_toc__njHla\",\"mobileMenu\":\"BlogPage_mobileMenu__iZyv7\",\"anime\":\"BlogPage_anime__48IQv\"};","import React, { useEffect } from 'react';\nimport { Outlet } from 'react-router';\n\n// comp\nimport SideMenu from '@/components/SideMenu';\nimport BlogToc2 from '@/components/BlogPage/BlogToc2';\nimport MobileTopBtn from '@/components/Universal/MobileTopBtn';\n\n// css\nimport style from './index.module.scss';\n\n// redux\nimport { setChosenList } from '@/redux/slices/chosenList';\nimport { useAppDispatch, useAppSelector } from '@/redux';\nimport { setFadeOut, setIsLoading } from '@/redux/slices/progressbar';\nimport { setJumpFlag, setMobileMenuOpen } from '@/redux/slices/universal';\nimport { setSelectedId } from '@/redux/slices/blogMenu';\n\n// context\nimport { useViewport } from '@/components/ContextProvider/ViewportProvider';\n\n// global\nimport { ANIME_HIDE_TIME, BACKGROUND_COLOR_DARK } from '@/global';\n\n// utils\nimport { getOneBlogId, hasBlogOfId } from '@/utils';\n\nconst BlogPage = () => {\n  const { width } = useViewport();\n  const dispatch = useAppDispatch();\n  const selectedId = useAppSelector(state => state.blogMenu.selectedId);\n  const curBlogContent = useAppSelector(state => state.blog.curBlogContent);\n  const menus = useAppSelector(state => state.blogMenu.menuList);\n  const fadeOut = useAppSelector(state => state.progressbar.fadeOut);\n  const themeMode = useAppSelector(state => state.universal.themeMode);\n  const jumpFlag = useAppSelector(state => state.universal.jumpFlag);\n\n  // 重置mobile open\n  useEffect(() => {\n    dispatch(setMobileMenuOpen(false));\n  }, []);\n\n  // 如果当前select不存在则重新选择\n  useEffect(() => {\n    if (!hasBlogOfId(menus, selectedId)) {\n      dispatch(setSelectedId(getOneBlogId(menus)));\n    }\n  }, []);\n\n  useEffect(() => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  }, []);\n\n  // 导航按钮变色\n  useEffect(() => {\n    dispatch(setChosenList([false, true, false, false]));\n  }, []);\n\n  // 打开滚动条\n  useEffect(() => {\n    // 如果先前打开了滚动条要先关闭\n    dispatch(setIsLoading(false));\n    setTimeout(() => {\n      dispatch(setIsLoading(true));\n    }, 50);\n  }, []);\n\n  useEffect(() => {\n    if (jumpFlag) {\n      // 重置jumpFLag标志\n      dispatch(setJumpFlag(false));\n      dispatch(setFadeOut(true));\n      setTimeout(() => {\n        window.scrollTo({\n          top: 0,\n        });\n      }, ANIME_HIDE_TIME);\n    }\n  }, [jumpFlag]);\n\n  return (\n    <div className={`${style.wrapper} clearfix ${themeMode === 'dark' ? 'dark' : 'light'}`}>\n      <div className={`${style.sider} showAnime`}>\n        <div>\n          <SideMenu noEdit={true} page=\"blog\"></SideMenu>\n        </div>\n      </div>\n      <div className={`${style.content} clearfix transBase ${fadeOut ? 'transHide' : ''}`}>\n        {/* 选中状态 */}\n        {selectedId ? <Outlet /> : <div style={{ fontSize: '24px' }}>当前没有博客，请添加博客后访问！</div>}\n      </div>\n      <div className={`${style.toc} showAnime`} style={width > 1100 ? undefined : { display: 'none' }}>\n        {selectedId ? <BlogToc2 text={curBlogContent}></BlogToc2> : undefined}\n      </div>\n      {/* Mobile Menu */}\n      <MobileTopBtn\n        styles={{\n          height: 350,\n          width: 250,\n          padding: 10,\n          backgroundColor: themeMode === 'dark' ? BACKGROUND_COLOR_DARK : '#FFF',\n        }}\n      >\n        <SideMenu\n          noEdit={true}\n          page=\"blog\"\n          closeMenu={() => {\n            dispatch(setMobileMenuOpen(false));\n          }}\n        ></SideMenu>\n      </MobileTopBtn>\n    </div>\n  );\n};\nexport default BlogPage;\n"],"names":["_ref","children","styles","dispatch","useAppDispatch","themeMode","useAppSelector","state","universal","open","moblieMenuOpen","_jsxs","_Fragment","_jsx","className","concat","style","onClick","setMobileMenuOpen","text","fadeOut","progressbar","tocList","useMemo","textList","headings","replace","match","titles","map","line","trim","title","split","getTitleList","index","key","href","length","Anchor","offsetTop","items","e","link","preventDefault","span","document","getElementById","String","window","scrollTo","top","behavior","width","useViewport","selectedId","blogMenu","curBlogContent","blog","menus","menuList","jumpFlag","useEffect","hasBlogOfId","setSelectedId","getOneBlogId","setChosenList","setIsLoading","setTimeout","setJumpFlag","setFadeOut","ANIME_HIDE_TIME","SideMenu","noEdit","page","Outlet","fontSize","undefined","display","BlogToc2","MobileTopBtn","height","padding","backgroundColor","BACKGROUND_COLOR_DARK","closeMenu"],"sourceRoot":""}