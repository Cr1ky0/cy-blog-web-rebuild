{"version":3,"file":"static/js/5831.c0681eba.chunk.js","mappings":"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","sources":["api/OSS/index.tsx","webpack://front-end/./src/pages/MainPage/BackStage/EditOSS/index.module.scss?e7bb","pages/MainPage/BackStage/EditOSS/index.tsx"],"sourcesContent":["import service from '@/utils/request';\nimport { improvedCatchAsync } from '@/api';\nimport { OSSConfig } from '@/interface/OSSApi';\n\n//GetAliOSS Policy-Token\nexport const getOSSPolicy = improvedCatchAsync(async () => {\n  const response = await service.get('/api/policy');\n  return Promise.resolve(response);\n});\n\nexport const setOSSObject = improvedCatchAsync(async (config: OSSConfig) => {\n  const response = await service.post('/api/policy/setConfig', config);\n  return Promise.resolve(response);\n});\n\nexport const getOSSObject = improvedCatchAsync(async () => {\n  const response = await service.get('/api/policy/getConfig');\n  return Promise.resolve(response);\n});\n","// extracted by mini-css-extract-plugin\nexport default {\"dark\":\"EditOSS_dark__Bvata\",\"dark-2\":\"EditOSS_dark-2__bJxMK\",\"dark-3\":\"EditOSS_dark-3__8ksuE\",\"dark-3-onforce\":\"EditOSS_dark-3-onforce__mcybY\",\"light\":\"EditOSS_light__F7chD\",\"light-1\":\"EditOSS_light-1__IvJ+f\",\"dark-font\":\"EditOSS_dark-font__5vQBb\",\"dark-back-2-onforce-no-trans\":\"EditOSS_dark-back-2-onforce-no-trans__TqiV7\",\"hoverDark\":\"EditOSS_hoverDark__XppjZ\",\"hoverLight\":\"EditOSS_hoverLight__vpxpS\",\"light-font\":\"EditOSS_light-font__V8uY3\",\"mark\":\"EditOSS_mark__Df6dW\",\"transBase\":\"EditOSS_transBase__G8w56\",\"transHide\":\"EditOSS_transHide__dlMEA\",\"showAnime\":\"EditOSS_showAnime__uw98k\",\"hideAnime\":\"EditOSS_hideAnime__qwHmi\",\"show-anime-delay-1s\":\"EditOSS_show-anime-delay-1s__yp+7w\",\"show-anime-no-delay\":\"EditOSS_show-anime-no-delay__3IOI6\",\"form\":\"EditOSS_form__nzIpa\"};","import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router';\n\n// antd\nimport { Button, Form, Input } from 'antd';\n\n// css\nimport style from './index.module.scss';\n\n// redux\nimport { useAppDispatch } from '@/redux';\nimport { setSelectKey } from '@/redux/slices/backstage';\n\n// api\nimport { OSSConfig } from '@/interface/OSSApi';\nimport { getOSSObject, setOSSObject } from '@/api/OSS';\n\n// provider\nimport { useGlobalMessage } from '@/components/ContextProvider/MessageProvider';\n\nconst EditOSS = () => {\n  const dispatch = useAppDispatch();\n  const msg = useGlobalMessage();\n  const navigate = useNavigate();\n  const [config, setConfig] = useState<OSSConfig>();\n  const [loading, setLoading] = useState(true);\n  const [form] = Form.useForm();\n  useEffect(() => {\n    dispatch(setSelectKey('oss'));\n    getOSSObject(\n      '',\n      res => {\n        setConfig(res.data.OSSObject);\n      },\n      err => {\n        msg.error(err);\n      }\n    );\n    setTimeout(() => {\n      setLoading(false);\n    }, 50);\n  }, []);\n\n  return (\n    <>\n      {loading ? undefined : (\n        <div className={style.wrapper}>\n          <Form\n            form={form}\n            name=\"wrap\"\n            labelCol={{ flex: '120px' }}\n            labelAlign=\"right\"\n            labelWrap\n            colon={false}\n            className={style.form}\n            initialValues={{\n              accessKeyId: config?.accessKeyId,\n              accessKeySecret: config?.accessKeySecret,\n              bucket: config?.bucket,\n              region: config?.region,\n            }}\n            onFinish={values => {\n              setOSSObject(\n                values,\n                () => {\n                  msg.loadingSuccessAsync('保存中...', '保存成功!');\n                  navigate(0);\n                },\n                err => {\n                  msg.error(err);\n                }\n              );\n            }}\n          >\n            <Form.Item label=\"AccessKeyId\" name=\"accessKeyId\" rules={[{ required: true }]}>\n              <Input placeholder=\"设定 AccessKeyId\" />\n            </Form.Item>\n            <Form.Item label=\"AccessKeySecret\" name=\"accessKeySecret\" rules={[{ required: true }]}>\n              <Input placeholder=\"设定 AccessKeySecret\" type=\"password\" />\n            </Form.Item>\n            <Form.Item label=\"Bucket\" name=\"bucket\" rules={[{ required: true }]}>\n              <Input placeholder=\"设定 Bucket\" />\n            </Form.Item>\n            <Form.Item label=\"Region\" name=\"region\" rules={[{ required: true }]}>\n              <Input placeholder=\"设定 Region\" />\n            </Form.Item>\n            <Form.Item label=\" \">\n              <Button type=\"primary\" htmlType=\"submit\">\n                保存\n              </Button>\n              <Button\n                style={{ marginLeft: '20px' }}\n                type=\"primary\"\n                danger\n                onClick={() => {\n                  form.setFieldsValue({\n                    accessKeyId: '',\n                    accessKeySecret: '',\n                    bucket: '',\n                    region: '',\n                  });\n                }}\n              >\n                清除\n              </Button>\n            </Form.Item>\n          </Form>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default EditOSS;\n"],"names":["getOSSPolicy","improvedCatchAsync","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","service","sent","abrupt","Promise","resolve","stop","setOSSObject","_ref2","_callee2","config","_context2","_x","apply","arguments","getOSSObject","_callee3","_context3","dispatch","useAppDispatch","msg","useGlobalMessage","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","setConfig","_useState3","_useState4","loading","setLoading","_Form$useForm","Form","form","useEffect","setSelectKey","res","data","OSSObject","err","error","setTimeout","_jsx","_Fragment","children","undefined","className","style","_jsxs","name","labelCol","flex","labelAlign","labelWrap","colon","initialValues","accessKeyId","accessKeySecret","bucket","region","onFinish","values","loadingSuccessAsync","label","rules","required","Input","placeholder","type","Button","htmlType","marginLeft","danger","onClick","setFieldsValue"],"sourceRoot":""}